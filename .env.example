# .env.example   (do NOT commit .env)

# =========================
# OpenAI (default provider)
# =========================
OPENAI_API_KEY="your-openai-api-key"
# Chat model options: gpt-5, gpt-4o, gpt-4o-mini (or any other OpenAi model you choose) 
OPENAI_CHAT_MODEL="gpt-5-nano-2025-08-07"
# Embedding model options: text-embedding-3-small, text-embedding-3-large
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ==========================================
# Azure OpenAI (Optional, for using Azure OpenAI instead of default)
# ==========================================
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=https://<resource-name>.openai.azure.com/
# Name of your chat deployment in Azure OpenAI (not the base model name)
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o
# Name of your embeddings deployment in Azure OpenAI
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# =========================
# Supabase (server-side)
# =========================
SUPABASE_URL="your-supabase-url"
SUPABASE_ANON_KEY="your-supabase-anon-key"
SUPABASE_SERVICE_KEY="your-supabase-service-key"

# ===========
# RAG tuning
# ===========
# If you reingest, you can experiment with 700–900 and overlap 120–150
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_TOKENS_PER_CHUNK=1500

# Retrieval (env-driven, no UI controls)
# Typical thresholds: 0.20–0.35. We recommend 0.25 to start.
SIMILARITY_THRESHOLD=0.25
# How many chunks to keep in context
MAX_CONTEXT_CHUNKS=10

# ========================
# Streamlit configuration
# ========================
# Azure sets $PORT; startup passes it to Streamlit
STREAMLIT_HOST=0.0.0.0
STREAMLIT_PORT=8501        # used only for local dev
STREAMLIT_SERVER_HEADLESS=true
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false

# ========================
# Authentication mode
# ========================
# Choose one:
#  - azure   → App Service Authentication (Entra ID / "Easy Auth")
#  - public  → no login required (local dev, quick demos)
#  - custom  → for plugging in your own provider (e.g., Auth0/Supabase Auth)
AUTH_MODE=azure

# If you plan to call Microsoft Graph directly (NOT required for Easy Auth),
# uncomment and fill these for local dev with MSAL:
MS_CLIENT_ID="your-client-id"           #Use without dashes or spaces
MS_TENANT_ID="your-tenant-id"
MS_CLIENT_SECRET="your-client-secret"

# ========================
# Telemetry / Monitoring
# ========================
# If you enabled Application Insights or Azure Monitor OpenTelemetry:
APPLICATIONINSIGHTS_CONNECTION_STRING="your-application-insights-connection-string"
# (Alternatively, if using Azure Monitor OpenTelemetry exporter)
AZURE_MONITOR_CONNECTION_STRING="your-azure-monitor-connection-string"
# Optional: name your service in traces
OTEL_SERVICE_NAME=askmydocs

# ========================
# Logging / runtime
# ========================
LOG_LEVEL=INFO
LOG_FILE=rag_system.log
PYTHONUNBUFFERED=1

# ========================
# Azure App Service notes
# ========================
# These are normally set in App Service "Application settings", not in .env,
# but keep here for local parity/documentation:
SCM_DO_BUILD_DURING_DEPLOYMENT=1
WEBSITES_PORT=8000
WEBSITES_CONTAINER_START_TIME_LIMIT=600
WEBSITES_INCLUDE_CLOUD_CERTS=true
# =======================
